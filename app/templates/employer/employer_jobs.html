{% extends "base.html" %}
{% block content %}
<div style="max-width: 900px; margin: 40px auto;">

  <h2 style="font-size: 2rem; font-weight: bold; color: #5b7fa3; margin-bottom: 20px; text-align: center;">
    Your Jobs
  </h2>

  {% if jobs %}
  <div id="job-carousel" style="position: relative;">
    {% for job in jobs %}
    <div class="job-card" style="background: #f3f8fd; border-radius: 16px; padding: 20px; box-shadow: 0 2px 12px #e0e7ff; display: {% if loop.first %}block{% else %}none{% endif %}; margin-bottom: 20px;">
      <h3 style="font-size: 1.2rem; font-weight: 600; color: #374151;">{{ job.title }}</h3>
      <form action="/employer/delete-job/{{ job.id }}" method="post" style="margin-top: 12px;">
        <input type="hidden" name="user_id" value="{{ user_id }}">
        <button style="color: #ef4444; background: #fee2e2; border: none; border-radius: 7px; padding: 6px 14px; font-size: 0.95rem; font-weight: 500; cursor: pointer;">
          Delete
        </button>
      </form>
    </div>
    {% endfor %}

    <!-- Circular Carousel Buttons -->
    <div style="text-align: center; margin-top: 15px; display: flex; justify-content: center; gap: 20px;">
      <button onclick="prevJob()" style="width: 40px; height: 40px; border-radius: 50%; border: none; background: #5b7fa3; color: white; font-size: 1.5rem; cursor: pointer;">&#10094;</button>
      <button onclick="nextJob()" style="width: 40px; height: 40px; border-radius: 50%; border: none; background: #5b7fa3; color: white; font-size: 1.5rem; cursor: pointer;">&#10095;</button>
    </div>
  </div>
  {% else %}
    <p style="color: #64748b; padding: 10px; background: #f3f8fd; border-radius: 10px; text-align: center;">No jobs posted yet.</p>
  {% endif %}

  <div style="margin-top: 20px; text-align: center;">
    <a href="/employer/dashboard?user_id={{ user_id }}" 
       style="color: #3b82f6; text-decoration: underline; font-weight: 500;">â¬… Back to Dashboard</a>
  </div>
</div>

<script>
let currentJobIndex = 0;
const jobs = document.querySelectorAll(".job-card");

function showJob(index) {
  jobs.forEach((job, i) => {
    job.style.display = (i === index) ? "block" : "none";
  });
}

function nextJob() {
  currentJobIndex = (currentJobIndex + 1) % jobs.length;
  showJob(currentJobIndex);
}

function prevJob() {
  currentJobIndex = (currentJobIndex - 1 + jobs.length) % jobs.length;
  showJob(currentJobIndex);
}
</script>
{% endblock %}
